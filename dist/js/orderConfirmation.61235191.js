(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["orderConfirmation"],{"2a01":function(t,c,e){"use strict";e("9c05")},"33fc":function(t,c,e){"use strict";e("4bb5")},"4bb5":function(t,c,e){},"4bf6":function(t,c,e){},"58c3":function(t,c,e){"use strict";e("f854")},"75c9":function(t,c,e){"use strict";e.d(c,"a",(function(){return s}));var n=e("7a23"),a=e("5502");const s=t=>{const c=Object(a["b"])(),e=c.state.cartList,s=(t,e,n,a)=>{c.commit("changeCartItemInfo",{shopId:t,productId:e,productInfo:n,num:a})},o=Object(n["b"])(()=>{var c;const n=(null===(c=e[t])||void 0===c?void 0:c.productList)||{},a={};for(let t in n){const c=n[t];c.count>0&&(a[t]=c)}return a}),r=Object(n["b"])(()=>{var c;const n=(null===(c=e[t])||void 0===c?void 0:c.shopName)||"";return n}),i=Object(n["b"])(()=>{var c;const n=null===(c=e[t])||void 0===c?void 0:c.productList,a={total:0,price:0,allChecked:!0};if(n)for(let t in n){const c=n[t];a.total+=c.count,c.check&&(a.price+=c.count*c.price),c.count>0&&!c.check&&(a.allChecked=!1)}return a.price=a.price.toFixed(2),a});return{cartList:e,shopName:r,productList:o,calculations:i,changeCartItemInfo:s}}},"9c05":function(t,c,e){},b957:function(t,c,e){"use strict";e.r(c);var n=e("7a23");const a={class:"wrapper"};function s(t,c,e,s,o,r){const i=Object(n["B"])("TopArea"),d=Object(n["B"])("ProductList"),_=Object(n["B"])("Order");return Object(n["u"])(),Object(n["f"])("div",a,[Object(n["j"])(i),Object(n["j"])(d),Object(n["j"])(_)])}const o={class:"top"},r={class:"top__header"},i=Object(n["h"])('<div class="top__receiver" data-v-6f1119d2><div class="top__receiver__title" data-v-6f1119d2>收货地址</div><div class="top__receiver__address" data-v-6f1119d2>北京理工大学国防科技园2号楼10层</div><div class="top__receiver__info" data-v-6f1119d2><span class="top__receiver__info__name" data-v-6f1119d2>瑶妹（先生）</span><span class="top__receiver__info__name" data-v-6f1119d2>18911024266</span></div><div class="iconfont top__receiver__icon" data-v-6f1119d2></div></div>',1);function d(t,c,e,a,s,d){return Object(n["u"])(),Object(n["f"])("div",o,[Object(n["g"])("div",r,[Object(n["g"])("div",{class:"iconfont top__header__back",onClick:c[0]||(c[0]=(...t)=>a.handleBackClick&&a.handleBackClick(...t))},""),Object(n["i"])(" 确认订单 ")]),i])}var _=e("6605"),l={name:"TopArea",setup(){const t=Object(_["d"])(),c=()=>{t.back()};return{handleBackClick:c}}},b=(e("58c3"),e("6b0d")),u=e.n(b);const p=u()(l,[["render",d],["__scopeId","data-v-6f1119d2"]]);var O=p;const j=t=>(Object(n["x"])("data-v-51236a8a"),t=t(),Object(n["v"])(),t),v={class:"products"},f={class:"products__title"},m={class:"products__wrapper"},h={class:"products__list"},C=["src"],g={class:"products__item__detail"},k={class:"products__item__title"},w={class:"products__item__price"},I=j(()=>Object(n["g"])("span",{class:"products__item__yen"},"¥ ",-1)),L={class:"products__item__total"},D=j(()=>Object(n["g"])("span",{class:"products__item__yen"},"¥ ",-1));function N(t,c,e,a,s,o){return Object(n["u"])(),Object(n["f"])("div",v,[Object(n["g"])("div",f,Object(n["D"])(a.shopName),1),Object(n["g"])("div",m,[Object(n["g"])("div",h,[(Object(n["u"])(!0),Object(n["f"])(n["a"],null,Object(n["A"])(a.productList,t=>(Object(n["u"])(),Object(n["f"])("div",{key:t._id,class:"products__item"},[Object(n["g"])("img",{class:"products__item__img",src:t.imgUrl},null,8,C),Object(n["g"])("div",g,[Object(n["g"])("h4",k,Object(n["D"])(t.name),1),Object(n["g"])("p",w,[Object(n["g"])("span",null,[I,Object(n["i"])(" "+Object(n["D"])(t.price)+" x "+Object(n["D"])(t.count),1)]),Object(n["g"])("span",L,[D,Object(n["i"])(" "+Object(n["D"])((t.price*t.count).toFixed(2)),1)])])])]))),128))])])])}var B=e("75c9"),x={name:"ProductList",setup(){const t=Object(_["c"])(),c=t.params.id,{shopName:e,productList:n}=Object(B["a"])(c);return{shopName:e,productList:n}}};e("f901");const y=u()(x,[["render",N],["__scopeId","data-v-51236a8a"]]);var S=y;const A=t=>(Object(n["x"])("data-v-bb680ea0"),t=t(),Object(n["v"])(),t),P={class:"order"},T={class:"order__price"},F=A(()=>Object(n["g"])("h3",{class:"mask__content__title"},"确认要离开收银台？",-1)),J=A(()=>Object(n["g"])("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1)),z={class:"mask__content__btns"};function H(t,c,e,a,s,o){return Object(n["u"])(),Object(n["f"])(n["a"],null,[Object(n["g"])("div",P,[Object(n["g"])("div",T,[Object(n["i"])("实付金额 "),Object(n["g"])("b",null,"¥"+Object(n["D"])(a.calculations.price),1)]),Object(n["g"])("div",{class:"order__btn",onClick:c[0]||(c[0]=()=>a.handleShowConfirmChange(!0))},"提交订单")]),Object(n["L"])(Object(n["g"])("div",{class:"mask",onClick:c[4]||(c[4]=()=>a.handleShowConfirmChange(!1))},[Object(n["g"])("div",{class:"mask__content",onClick:c[3]||(c[3]=Object(n["M"])(()=>{},["stop"]))},[F,J,Object(n["g"])("div",z,[Object(n["g"])("div",{class:"mask__content__btn mask__content__btn--first",onClick:c[1]||(c[1]=()=>a.handleConfirmOrder(!0))},"取消订单"),Object(n["g"])("div",{class:"mask__content__btn mask__content__btn--last",onClick:c[2]||(c[2]=()=>a.handleConfirmOrder(!1))},"确认支付")])])],512),[[n["H"],a.showConfirm]])],64)}e("14d9");var M=e("5502"),U=e("b775");const q=(t,c,e)=>{const n=Object(_["d"])(),a=Object(M["b"])(),s=async s=>{const o=[];for(let t in e.value){const c=e.value[t];o.push({id:parseInt(c._id,10),num:c.count})}try{const e=await Object(U["b"])("/api/order",{addressId:1,shopId:t,shopName:c.value,isCanceled:s,products:o});0===(null===e||void 0===e?void 0:e.errno)&&(a.commit("clearCartData",t),n.push({name:"OrderList"}))}catch(r){}};return{handleConfirmOrder:s}},E=()=>{const t=Object(n["z"])(!1),c=c=>{t.value=c};return{showConfirm:t,handleShowConfirmChange:c}};var G={name:"Order",setup(){const t=Object(_["c"])(),c=parseInt(t.params.id,10),{calculations:e,shopName:n,productList:a}=Object(B["a"])(c),{handleConfirmOrder:s}=q(c,n,a),{showConfirm:o,handleShowConfirmChange:r}=E();return{showConfirm:o,handleShowConfirmChange:r,calculations:e,handleConfirmOrder:s}}};e("2a01");const K=u()(G,[["render",H],["__scopeId","data-v-bb680ea0"]]);var Q=K,R={name:"OrderConfirmation",components:{TopArea:O,ProductList:S,Order:Q}};e("33fc");const V=u()(R,[["render",s],["__scopeId","data-v-1f6731da"]]);c["default"]=V},f854:function(t,c,e){},f901:function(t,c,e){"use strict";e("4bf6")}}]);
//# sourceMappingURL=orderConfirmation.61235191.js.map