{"version":3,"sources":["webpack:///./src/views/shop/Shop.vue","webpack:///./src/views/shop/Content.vue","webpack:///./src/views/shop/Content.vue?538f","webpack:///./src/views/shop/Cart.vue","webpack:///./src/views/shop/Cart.vue?d676","webpack:///./src/views/shop/Shop.vue?3cc9","webpack:///./src/effects/cartEffects.js","webpack:///./src/views/shop/Shop.vue?ef4d","webpack:///./src/views/shop/Cart.vue?7573","webpack:///./src/components/ShopInfo.vue","webpack:///./src/components/ShopInfo.vue?8408","webpack:///./src/components/ShopInfo.vue?3ae2","webpack:///./src/views/shop/Content.vue?e81b"],"names":["class","_createElementVNode","placeholder","_createElementBlock","_hoisted_1","_hoisted_2","onClick","$setup","_hoisted_3","_createVNode","_component_ShopInfo","item","hideBorder","imgUrl","_component_Content","shopName","name","_component_Cart","_Fragment","tab","key","_hoisted_4","_id","src","_hoisted_6","_hoisted_7","_hoisted_8","sales","_hoisted_9","_hoisted_10","price","_hoisted_11","oldPrice","_hoisted_12","$props","categories","useTabEffect","currentTab","ref","handleTabClick","value","useCurrentListEffect","shopId","content","reactive","list","getContentData","async","result","get","errno","data","length","watchEffect","toRefs","useCartEffect","store","useStore","cartList","changeCartItemInfo","useCommonCartEffect","changeShopName","commit","changeCartItem","productId","num","getProductCartCount","productList","count","props","setup","route","useRoute","params","id","__exports__","total","innerHTML","allChecked","_hoisted_5","check","_hoisted_13","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_component_router_link","to","path","calculations","changeCartItemChecked","cleanCartProducts","setCartItemsChecked","toggleCartEffect","showCart","handleCartShowChange","useShopInfoEffect","getItemData","useBackRouterEffect","router","useRouter","handleBackClick","back","components","ShopInfo","Content","Cart","render","state","productInfo","computed","notEmptyProductList","i","product","toFixed","expressLimit","expressPrice","slogan"],"mappings":"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","file":"js/shop.38ff3b94.js","sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <div class=\"search\">\n      <div class=\"search__back iconfont\" @click=\"handleBackClick\">\n        &#xe6f2;\n      </div>\n      <div class=\"search__content\">\n        <span class=\"search__content__icon iconfont\">&#xe62d;</span>\n        <input\n          class=\"search__content__input\"\n          placeholder=\"请输入商品名称\"\n        />\n      </div>\n    </div>\n    <ShopInfo :item=\"item\" :hideBorder=\"true\" v-show=\"item.imgUrl\"/>\n    <Content :shopName=\"item.name\" />\n    <Cart />\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { get } from '../../utils/request'\nimport ShopInfo from '../../components/ShopInfo'\nimport Content from './Content'\nimport Cart from './Cart'\n\n// 获取当前商铺信息\nconst useShopInfoEffect = () => {\n  const route = useRoute()\n  const data = reactive({ item: {} })\n  const getItemData = async () => {\n    const result = await get(`/api/shop/${route.params.id}`)\n    if(result?.errno === 0 && result?.data) {\n      data.item = result.data\n    }\n  }\n  const { item } = toRefs(data)\n  return { item, getItemData }\n}\n\n// 点击回退逻辑\nconst useBackRouterEffect = () => {\n  const router = useRouter()\n  const handleBackClick = () => {\n    router.back()\n  }\n  return handleBackClick\n}\n\nexport default {\n  name: 'Shop',\n  components: { ShopInfo, Content, Cart },\n  setup() {\n    const { item, getItemData } = useShopInfoEffect()\n    const handleBackClick = useBackRouterEffect()\n    getItemData()\n    return { item, handleBackClick }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n.wrapper {\n  padding: 0 .18rem;\n}\n.search {\n  display: flex;\n  margin: .14rem 0 .04rem 0;\n  line-height: .32rem;\n  &__back {\n    width: .3rem;\n    font-size: .24rem;\n    color: #B6B6B6;\n  }\n  &__content {\n    display: flex;\n    flex: 1;\n    background: $search-bgColor;\n    border-radius: .16rem;\n    &__icon {\n      width: .44rem;\n      text-align: center;\n      color: $search-fontColor;\n    }\n    &__input {\n      display: block;\n      width: 100%;\n      padding-right: .2rem;\n      border: none;\n      outline: none;\n      background: none;\n      height: .32rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      &::placeholder {\n        color: $content-fontcolor;\n      }\n    }\n  }\n}\n</style>","<template>\n  <div class=\"content\">\n    <div class=\"category\">\n      <div\n        :class=\"{'category__item': true, 'category__item--active': currentTab === item.tab}\"\n        v-for=\"item in categories\"\n        :key=\"item.name\"\n        @click=\"() => handleTabClick(item.tab)\"\n      >\n        {{item.name}}\n      </div>\n    </div>\n    <div class=\"product\">\n      <div\n        class=\"product__item\"\n        v-for=\"item in list\"\n        :key=\"item._id\"\n      >\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__sales\">月售 {{item.sales}} 件</p>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span\n            class=\"product__number__minus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, -1, shopName) }\"\n          >&#xe691;</span>\n            {{getProductCartCount(shopId, item._id)}}\n          <span\n            class=\"product__number__plus iconfont\"\n            @click=\"() => { changeCartItem(shopId, item._id, item, 1, shopName) }\"\n          >&#xe668;</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { reactive, ref, toRefs, watchEffect } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { get } from '../../utils/request'\nimport { useCommonCartEffect } from '../../effects/cartEffects'\n\nconst categories = [\n  { name: '全部商品', tab: 'all' },\n  { name:'秒杀', tab: 'seckill' },\n  { name: '新鲜水果', tab: 'fruit'}\n]\n\n// Tab 切换相关的逻辑\nconst useTabEffect = () => {\n  const currentTab = ref(categories[0].tab)\n  const handleTabClick = (tab) => {\n    currentTab.value = tab\n  }\n  return { currentTab, handleTabClick}\n}\n\n// 列表内容相关的逻辑\nconst useCurrentListEffect = (currentTab, shopId) => {\n  const content = reactive({ list: [] })\n  const getContentData = async () => {\n    const result = await get(`/api/shop/${shopId}/products`, {\n      tab: currentTab.value\n    })\n    if(result?.errno === 0 && result?.data?.length) {\n      content.list = result.data;\n    }\n  }\n  watchEffect(() => { getContentData() })\n  const { list } = toRefs(content)\n  return { list }\n}\n\n// 购物车相关逻辑\nconst useCartEffect = () => {\n  const store = useStore()\n  const { cartList, changeCartItemInfo } = useCommonCartEffect()\n  const changeShopName = (shopId, shopName) => {\n    store.commit('changeShopName', { shopId, shopName })\n  }\n  const changeCartItem = (shopId, productId, item, num, shopName) => {\n    changeCartItemInfo(shopId, productId, item, num)\n    changeShopName(shopId, shopName)\n  }\n  const getProductCartCount = (shopId, productId) => {\n    return cartList?.[shopId]?.productList?.[productId]?.count || 0\n  }\n  return { cartList, changeCartItem, getProductCartCount }\n}\n\nexport default {\n  name: 'Content',\n  props: ['shopName'],\n  setup() {\n    const route = useRoute()\n    const shopId = route.params.id\n    const { currentTab, handleTabClick } = useTabEffect()\n    const { list } = useCurrentListEffect(currentTab, shopId)\n    const { changeCartItem, cartList, getProductCartCount } = useCartEffect()\n    return {\n      categories, currentTab, handleTabClick, list,\n      shopId, changeCartItem, cartList, getProductCartCount\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n.content {\n  display: flex;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 1.5rem;\n  bottom: .5rem;\n}\n.category {\n  overflow-y: scroll;\n  height: 100%;\n  width: .76rem;\n  background: $search-bgColor;\n  &__item {\n    line-height: .4rem;\n    text-align: center;\n    font-size: .14rem;\n    color: #333;\n    &--active {\n      background: $bgColor;\n    }\n  }\n}\n.product {\n  overflow-y: scroll;\n  flex: 1;\n  &__item {\n    position: relative;\n    display: flex;\n    padding: .12rem 0;\n    margin: 0 .16rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: .68rem;\n      height: .68rem;\n      margin-right: .16rem;\n    }\n    &__title {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__sales {\n      margin: .06rem 0;\n      font-size: .12rem;\n      color: $content-fontcolor;\n    }\n    &__price {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $hightlight-fontColor;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      line-height: .2rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .12rem;\n      line-height: .18rem;\n      &__minus {\n        position:relative;\n        top: .02rem;\n        color: $medium-fontColor;\n        margin-right: .05rem;\n      }\n      &__plus {\n        position:relative;\n        top: .02rem;\n        color: $btn-bgColor;\n        margin-left: .05rem;\n      }\n    }\n  }\n  \n}\n</style>\n","import { render } from \"./Content.vue?vue&type=template&id=773c02bc&scoped=true\"\nimport script from \"./Content.vue?vue&type=script&lang=js\"\nexport * from \"./Content.vue?vue&type=script&lang=js\"\n\nimport \"./Content.vue?vue&type=style&index=0&id=773c02bc&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/mac/Downloads/项目联调与打包源码/jingdong/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-773c02bc\"]])\n\nexport default __exports__","<template>\n  <div\n    class=\"mask\"\n    v-if=\"showCart && calculations.total > 0\"\n    @click=\"handleCartShowChange\"\n  />\n  <div class=\"cart\">\n    <div class=\"product\" v-if=\"showCart && calculations.total > 0\">\n      <div class=\"product__header\">\n        <div\n          class=\"product__header__all\"\n          @click=\"() => setCartItemsChecked(shopId)\"\n        >\n          <span\n            class=\"product__header__icon iconfont\"\n            v-html=\"calculations.allChecked ? '&#xe652;': '&#xe667;'\"\n          >\n          </span>\n          全选\n        </div>\n        <div class=\"product__header__clear\">\n          <span class=\"product__header__clear__btn\"\n            @click=\"() => cleanCartProducts(shopId)\"\n          >清空购物车</span>\n        </div>\n      </div>\n      <div\n        v-for=\"item in productList\"\n        :key=\"item._id\"\n        class=\"product__item\"\n      >\n        <div\n          class=\"product__item__checked iconfont\"\n          v-html=\"item.check ? '&#xe652;': '&#xe667;'\"\n          @click=\"() => changeCartItemChecked(shopId, item._id)\"\n        />\n        <img class=\"product__item__img\" :src=\"item.imgUrl\" />\n        <div class=\"product__item__detail\">\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\n          <p class=\"product__item__price\">\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\n          </p>\n        </div>\n        <div class=\"product__number\">\n          <span\n            class=\"product__number__minus iconfont\"\n            @click=\"() => { changeCartItemInfo(shopId, item._id, item, -1) }\"\n          >&#xe691;</span>\n            {{item.count || 0}}\n          <span\n            class=\"product__number__plus iconfont\"\n            @click=\"() => { changeCartItemInfo(shopId, item._id, item, 1) }\"\n          >&#xe668;</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"check\">\n      <div class=\"check__icon\">\n        <img\n          src=\"http://www.dell-lee.com/imgs/vue3/basket.png\"\n          class=\"check__icon__img\"\n          @click=\"handleCartShowChange\"\n        />\n        <div class=\"check__icon__tag\">{{calculations.total}}</div>\n      </div>\n      <div class=\"check__info\">\n        总计：<span class=\"check__info__price\">&yen; {{calculations.price}}</span>\n      </div>\n      <div class=\"check__btn\" v-show=\"calculations.total > 0\">\n        <router-link :to=\"{path: `/orderConfirmation/${shopId}`}\">\n          去结算\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRoute } from 'vue-router'\nimport { useCommonCartEffect } from '../../effects/cartEffects'\n\n// 获取购物车信息逻辑\nconst useCartEffect = (shopId) => {\n    const store = useStore()\n    const {\n      productList, calculations, changeCartItemInfo\n    } = useCommonCartEffect(shopId)\n\n    const changeCartItemChecked = (shopId, productId) => {\n      store.commit('changeCartItemChecked', {shopId, productId})\n    }\n\n    const cleanCartProducts = (shopId) => {\n      store.commit('cleanCartProducts', { shopId })\n    }\n\n    const setCartItemsChecked = (shopId) => {\n      store.commit('setCartItemsChecked', { shopId })\n    }\n\n    return {\n      calculations, productList, cleanCartProducts,\n      changeCartItemInfo, changeCartItemChecked, setCartItemsChecked,\n    }\n}\n\n// 展示隐藏购物车逻辑\nconst toggleCartEffect = () => {\n  const showCart = ref(false)\n  const handleCartShowChange = () => {\n    showCart.value = !showCart.value;\n  }\n  return { showCart, handleCartShowChange}\n}\n\nexport default {\n  name: 'Cart',\n  setup() {\n    const route = useRoute();\n    const shopId = route.params.id;\n    const {\n      calculations, productList, cleanCartProducts,\n      changeCartItemInfo, changeCartItemChecked, setCartItemsChecked\n    } = useCartEffect(shopId)\n    const { showCart, handleCartShowChange } = toggleCartEffect()\n    return {\n      calculations, shopId, productList, cleanCartProducts,\n      changeCartItemInfo, changeCartItemChecked,\n      setCartItemsChecked, showCart, handleCartShowChange\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n@import '../../style/mixins.scss';\n.mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  top: 0;\n  background: rgba(0, 0, 0, .5);\n  z-index: 1;\n}\n.cart {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 2;\n  background: $bgColor;\n}\n.product {\n  overflow-y: scroll;\n  flex: 1;\n  background: $bgColor;\n  &__header {\n    display: flex;\n    line-height: .52rem;\n    border-bottom: .01rem solid $content-bgColor;\n    font-size: .14rem;\n    color: $content-fontcolor;\n    &__all {\n      width: .64rem;\n      margin-left: .18rem;\n    }\n    &__icon {\n      display: inline-block;\n      margin-right: .1rem;\n      vertical-align: top;\n      color: $btn-bgColor;\n      font-size: .2rem;\n    }\n    &__clear {\n      flex: 1;\n      margin-right: .16rem;\n      text-align: right;\n      &__btn {\n        display: inline-block;\n      }\n    }\n  }\n  &__item {\n    position: relative;\n    display: flex;\n    padding: .12rem 0;\n    margin: 0 .16rem;\n    border-bottom: .01rem solid $content-bgColor;\n    &__checked {\n      line-height: .5rem;\n      margin-right: .2rem;\n      color: $btn-bgColor;\n      font-size: .2rem;\n    }\n    &__detail {\n      overflow: hidden;\n    }\n    &__img {\n      width: .46rem;\n      height: .46rem;\n      margin-right: .16rem;\n    }\n    &__title {\n      margin: 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $content-fontcolor;\n      @include ellipsis;\n    }\n    &__price {\n      margin: .06rem 0 0 0;\n      line-height: .2rem;\n      font-size: .14rem;\n      color: $hightlight-fontColor;\n    }\n    &__yen {\n      font-size: .12rem;\n    }\n    &__origin {\n      margin-left: .06rem;\n      line-height: .2rem;\n      font-size: .12rem;\n      color: $light-fontColor;\n      text-decoration: line-through;\n    }\n    .product__number {\n      position: absolute;\n      right: 0;\n      bottom: .26rem;\n      &__minus {\n        position:relative;\n        top: .02rem;\n        color: $medium-fontColor;\n        margin-right: .05rem;\n      }\n      &__plus {\n        position:relative;\n        top: .02rem;\n        color: $btn-bgColor;\n        margin-left: .05rem;\n      }\n    }\n  }\n}\n.check {\n  display: flex;\n  height: .49rem;\n  border-top: .01rem solid $content-bgColor;\n  line-height: .49rem;\n  &__icon {\n    position: relative;\n    width: .84rem;\n    &__img {\n      display: block;\n      margin: .12rem auto;\n      width: .28rem;\n      height: .26rem;\n    }\n    &__tag {\n      position: absolute;\n      left: .46rem;\n      top: .04rem;\n      padding: 0 .04rem;\n      min-width: .2rem;\n      height: .2rem;\n      line-height: .2rem;\n      background-color: $hightlight-fontColor;\n      border-radius: .1rem;\n      font-size: .12rem;\n      text-align: center;\n      color: #fff;\n      transform: scale(.5);\n      transform-origin: left center;\n    }\n  }\n  &__info {\n    flex: 1;\n    color: $content-fontcolor;\n    font-size: .12rem;\n    &__price {\n      line-height: .49rem;\n      color: $hightlight-fontColor;\n      font-size: .18rem;\n    }\n  }\n  &__btn {\n    width: .98rem;\n    background-color: #4FB0F9;\n    text-align: center;\n    font-size: .14rem;\n    a {\n      color: $bgColor;\n      text-decoration: none;\n    }\n  }\n}\n</style>","import { render } from \"./Cart.vue?vue&type=template&id=5204b470&scoped=true\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=5204b470&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/mac/Downloads/项目联调与打包源码/jingdong/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5204b470\"]])\n\nexport default __exports__","import { render } from \"./Shop.vue?vue&type=template&id=5121c098&scoped=true\"\nimport script from \"./Shop.vue?vue&type=script&lang=js\"\nexport * from \"./Shop.vue?vue&type=script&lang=js\"\n\nimport \"./Shop.vue?vue&type=style&index=0&id=5121c098&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/mac/Downloads/项目联调与打包源码/jingdong/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5121c098\"]])\n\nexport default __exports__","import { computed } from 'vue'\nimport { useStore } from 'vuex'\n// 购物车相关逻辑\nexport const useCommonCartEffect = (shopId) => {\n  const store = useStore()\n  const cartList = store.state.cartList;\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\n    store.commit('changeCartItemInfo', {\n      shopId, productId, productInfo, num\n    })\n  }\n  \n  const productList = computed(() => {\n    const productList = cartList[shopId]?.productList || {}\n    const notEmptyProductList = {}\n    for(let i in productList) {\n      const product = productList[i]\n      if(product.count > 0 ) {\n        notEmptyProductList[i] = product\n      }\n    }\n    return notEmptyProductList\n  })\n\n  const shopName = computed(() => {\n    const shopName = cartList[shopId]?.shopName || ''\n    return shopName\n  })\n\n  const calculations = computed(() => {\n    const productList = cartList[shopId]?.productList\n    const result = { total: 0, price: 0, allChecked: true}\n    if(productList) {\n       for(let i in productList) {\n         const product = productList[i]\n         result.total += product.count\n         if(product.check) {\n           result.price += (product.count * product.price)\n         }\n         if(product.count > 0 && !product.check) {\n           result.allChecked = false\n         }\n      }\n    }\n    result.price = result.price.toFixed(2)\n    return result\n  })\n\n  return { cartList, shopName, productList, calculations, changeCartItemInfo }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Shop.vue?vue&type=style&index=0&id=5121c098&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Cart.vue?vue&type=style&index=0&id=5204b470&lang=scss&scoped=true\"","<template>\n  <div class=\"shop\">\n    <img :src=\"item.imgUrl\" class=\"shop__img\">\n    <div\n      :class=\"{'shop__content': true, 'shop__content--bordered': hideBorder ? false: true}\"\n    >\n      <div class=\"shop__content__title\">{{item.name}}</div>\n      <div class=\"shop__content__tags\">\n        <span class=\"shop__content__tag\">月售: {{item.sales}}</span>\n        <span class=\"shop__content__tag\">起送: {{item.expressLimit}}</span>\n        <span class=\"shop__content__tag\">基础运费: {{item.expressPrice}}</span>\n      </div>\n      <p class=\"shop__content__highlight\">{{item.slogan}}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ShopInfo',\n  props: ['item', 'hideBorder']\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../style/viriables.scss';\n.shop {\n  display: flex;\n  padding-top: .12rem;\n  &__img {\n    margin-right: .16rem;\n    width: .56rem;\n    height: .56rem;\n  }\n  &__content {\n    flex: 1;\n    padding-bottom: .12rem;\n    &--bordered {\n      border-bottom: .01rem solid $content-bgColor;\n    }\n    &__title {\n      line-height: .22rem;\n      font-size: .16rem;\n      color: $content-fontcolor;\n    }\n    &__tags {\n      margin-top: .08rem;\n      line-height: .18rem;\n      font-size: .13rem;\n      color: $content-fontcolor;\n    }\n    &__tag {\n      margin-right: .16rem;\n    }\n    &__highlight {\n      margin: .08rem 0 0 0;\n      line-height: .18rem;\n      font-size: .13rem;\n      color: $hightlight-fontColor;\n    }\n  }\n}\n</style>","import { render } from \"./ShopInfo.vue?vue&type=template&id=6cd9f502&scoped=true\"\nimport script from \"./ShopInfo.vue?vue&type=script&lang=js\"\nexport * from \"./ShopInfo.vue?vue&type=script&lang=js\"\n\nimport \"./ShopInfo.vue?vue&type=style&index=0&id=6cd9f502&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/mac/Downloads/项目联调与打包源码/jingdong/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6cd9f502\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ShopInfo.vue?vue&type=style&index=0&id=6cd9f502&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Content.vue?vue&type=style&index=0&id=773c02bc&lang=scss&scoped=true\""],"sourceRoot":""}